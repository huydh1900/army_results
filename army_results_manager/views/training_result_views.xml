<odoo>

    <record id="view_training_result_tree" model="ir.ui.view">
        <field name="name">training.result.tree</field>
        <field name="model">training.result</field>
        <field name="arch" type="xml">
            <tree string="Kết quả huấn luyện" create="false">
                <field name="employee_id" options='{"no_open":True}'/>
                <field name="score"/>
                <field name="state"/>
                <field name="result"/>
                <field name="note"/>
                <button name="action_generate_note_by_ai"
                        type="object"
                        string="Đánh giá AI"
                        groups="army_results_manager.group_training_commander_assistant,army_results_manager.group_admin"
                        title="Tạo đánh giá bằng AI"/>
            </tree>
        </field>
    </record>

    <record id="view_training_result_tree_inherit_js_class" model="ir.ui.view">
        <field name="name">training.result.tree</field>
        <field name="model">training.result</field>
        <field name="inherit_id" ref="army_results_manager.view_training_result_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//tree" position="attributes">
                <attribute name="js_class">button_in_tree</attribute>
            </xpath>
        </field>
    </record>

    <record id="view_training_result_form" model="ir.ui.view">
        <field name="name">training.result.form</field>
        <field name="model">training.result</field>
        <field name="arch" type="xml">
            <form string="Kết quả huấn luyện" create="false">
                <group>
                    <group>
                        <field name="plan_name" readonly="1"/>
                        <field name="training_course_id" options='{"no_open":True}'/>
                        <field name="year"/>
                        <field name="employee_id" options='{"no_open":True}'/>
                        <field name="state"/>
                    </group>
                    <group>
                        <field name="score"/>
                        <field name="result"/>
                        <field name="note"/>
                    </group>
                </group>
                <notebook>
                    <page string="Kết quả giai đoạn huấn luyện">
                        <field name="day_comment_ids">
                            <tree create="0" delete="0" editable="bottom">
                                <field name="day_id" readonly="1"/>
                                <field name="lesson_name" readonly="1"/>
                                <field name="score" readonly="1"/>
                                <field name="comment" readonly="1"/>
                            </tree>
                        </field>
                    </page>
                </notebook>
            </form>
        </field>
    </record>

    <record id="view_training_result_search" model="ir.ui.view">
        <field name="name">training.result.search</field>
        <field name="model">training.result</field>
        <field name="arch" type="xml">
            <search string="Tìm kiếm kết quả huấn luyện">

                <!-- Tìm kiếm nhanh -->
                <field name="employee_id" string="Học viên"/>
                <field name="training_course_id" string="Môn học"/>
                <field name="year" string="Năm"/>
                <field name="plan_name" string="Tên kế hoạch"/>
                <field name="score" string="Điểm số"/>

                <separator/>

                <!-- Bộ lọc theo kết quả -->
                <filter name="filter_pass"
                        string="Đạt"
                        domain="[('result','=','pass')]"/>

                <filter name="filter_fail"
                        string="Không đạt"
                        domain="[('result','=','fail')]"/>

                <filter name="filter_excellent"
                        string="Xuất sắc"
                        domain="[('result','=','excellent')]"/>

                <filter name="filter_good"
                        string="Khá"
                        domain="[('result','=','good')]"/>

                <filter name="filter_average"
                        string="Trung bình"
                        domain="[('result','=','average')]"/>

                <separator/>

                <!-- Bộ lọc trạng thái -->
                <filter name="filter_done"
                        string="Hoàn thành"
                        domain="[('state','=','done')]"/>

                <filter name="filter_pending"
                        string="Chưa hoàn thành"
                        domain="[('state','=','pending')]"/>

                <separator/>

                <!-- Group By -->
                <group expand="0" string="Nhóm theo">
                    <filter name="group_by_employee"
                            string="Học viên"
                            context="{'group_by':'employee_id'}"/>

                    <filter name="group_by_course"
                            string="Môn học"
                            context="{'group_by':'training_course_id'}"/>

                    <filter name="group_by_plan"
                            string="Kế hoạch"
                            context="{'group_by':'plan_id'}"/>

                    <filter name="group_by_year"
                            string="Năm"
                            context="{'group_by':'year'}"/>

                    <filter name="group_by_result"
                            string="Xếp loại"
                            context="{'group_by':'result'}"/>

                    <filter name="group_by_state"
                            string="Tình trạng"
                            context="{'group_by':'state'}"/>
                </group>

            </search>
        </field>
    </record>


</odoo>
