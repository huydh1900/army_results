<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="hr.hr_employee_print_badge" model="ir.actions.report">
        <field name="binding_model_id" eval="False"/>
    </record>

    <record id="view_employee_tree_inherit" model="ir.ui.view">
        <field name="name">hr.employee.tree</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_tree"/>
        <field name="arch" type="xml">
            <field name="work_phone" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <xpath expr="//header/button[1]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <field name="name" position="attributes">
                <attribute name="string">Họ và tên</attribute>
            </field>
            <field name="job_id" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="activity_ids" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="category_ids" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="country_id" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="activity_user_id" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="work_location_id" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="parent_id" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="activity_date_deadline" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="name" position="after">
                <field name="role"/>
                <field name="job_id" string="Chức vụ"/>
            </field>
            <field name="work_email" position="attributes">
                <attribute name="string">Email</attribute>
            </field>
            <field name="work_phone" position="replace">
                <field name="mobile_phone" string="SĐT"/>
            </field>
            <field name="department_id" position="replace">
                <field name="department_id" string="Đơn vị công tác"/>
            </field>
        </field>
    </record>

    <record id="view_employee_form_inherit" model="ir.ui.view">
        <field name="name">hr.employee.form</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form"/>
        <field name="arch" type="xml">
            <field name="work_email" position="after">
                <field name="training_expertise" attrs="{'invisible': [('role', '!=', 'training_officer')]}"/>
                <field name="classification" attrs="{'invisible': [('role', '!=', 'student')]}"/>
                <field name="coaching_experience" attrs="{'invisible': [('role', '!=', 'training_officer')]}"/>
                <field name="role"/>
            </field>
            <field name="work_phone" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>

            <xpath expr="//header/button[1]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <field name="coach_id" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="mobile_phone" position="attributes">
                <attribute name="string">SĐT</attribute>
            </field>
            <field name="km_home_work" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>

            <field name="category_ids" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="lang" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="parent_id" position="attributes">
                <attribute name="string">Người quản lý</attribute>
            </field>
            <field name="country_of_birth" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="place_of_birth" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="country_id" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="passport_id" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="bank_account_id" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="employee_type" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="work_email" position="attributes">
                <attribute name="string">Email</attribute>
            </field>
            <field name="work_email" position="after">
                <field name="identification_id"/>
            </field>
            <field name="department_id" position="attributes">
                <attribute name="string">Đơn vị công tác</attribute>
            </field>
            <xpath expr="//form/sheet/notebook/page[@name='personal_information']/group/group[2]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//form/sheet/notebook/page[@name='personal_information']/group/group[3]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//form/sheet/notebook/page[@name='personal_information']/group/group[1]/div"
                   position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//form/sheet/notebook/page[@name='public']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//form/sheet/notebook/page[@name='hr_settings']/group/group[@name='identification_group']"
                   position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//form/sheet/notebook/page[@name='personal_information']/group/group[1]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//page[@name='personal_information']" position="after">
                <page string="Kết quả huấn luyện" attrs="{'invisible': [('role','!=','student')]}">
                    <field name="result_ids">
                        <tree editable="bottom">
                            <field name="training_course_id"/>
                            <field name="score"/>
                            <field name="result"/>
                            <field name="note"/>
                        </tree>
                    </field>
                </page>
            </xpath>

            <xpath expr="//form/sheet/notebook/page[@name='personal_information']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//form/sheet/notebook/page[@name='hr_settings']" position="attributes">
                <attribute name="string">Thiết lập tài khoản</attribute>
            </xpath>
        </field>
    </record>

    <record id="view_employee_form_inherit_vn" model="ir.ui.view">
        <field name="name">hr.employee.form.inherit.vn</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='name']" position="attributes">
                <attribute name="string">Tên chiến sĩ</attribute>
                <attribute name="placeholder">Tên chiến sĩ</attribute>
            </xpath>

            <xpath expr="//field[@name='job_title']" position="attributes">
                <attribute name="string">Chức vụ</attribute>
                <attribute name="placeholder">Chức vụ</attribute>
            </xpath>

            <xpath expr="//field[@name='work_email']" position="attributes">
                <attribute name="string">Email cơ quan</attribute>
            </xpath>

            <xpath expr="//group[@name='active_group']" position="attributes">
                <attribute name="string">Trạng thái</attribute>
            </xpath>

            <xpath expr="//field[@name='user_id' and ancestor::group[@name='active_group']]" position="attributes">
                <attribute name="string">Người dùng liên quan</attribute>
            </xpath>

        </field>
    </record>

    <record id="hr.action_hr_employee_create_user" model="ir.actions.server">
        <field name="groups_id" eval="[(6, 0, [ref('base.group_no_one')])]"/>
    </record>

    <record id="view_employee_search_inherit" model="ir.ui.view">
        <field name="name">hr.employee.search.inherit</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_filter"/>
        <field name="arch" type="xml">
            <!-- Giữ lại field name và thêm các field cần thiết -->
            <field name="name" position="replace">
                <field name="name" string="Họ và tên"/>
                <field name="role" string="Vai trò"/>
                <field name="job_id" string="Chức vụ"/>
                <field name="mobile_phone" string="SĐT"/>
                <field name="work_email" string="Email"/>
                <field name="department_id" string="Đơn vị công tác"/>
            </field>
            
            <!-- Xóa các field không cần -->
            <field name="category_ids" position="replace"/>
            <field name="parent_id" position="replace"/>
            <field name="company_id" position="replace"/>
            
            <!-- Thêm các filter mới -->
            <filter name="inactive" position="after">
                <separator/>
                <filter name="training_officer" string="Cán bộ chỉ huy" 
                        domain="[('role','=','training_officer')]"/>
                <filter name="student" string="Học viên" 
                        domain="[('role','=','student')]"/>
            </filter>
            
            <!-- Thêm group by mới -->
            <filter name="group_department" position="after">
                <filter name="group_role" string="Vai trò" 
                        context="{'group_by':'role'}"/>
                <filter name="group_job" string="Chức vụ" 
                        context="{'group_by':'job_id'}"/>
            </filter>
        </field>
    </record>
</odoo>
